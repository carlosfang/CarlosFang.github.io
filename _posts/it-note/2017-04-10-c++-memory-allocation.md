---
layout: post
title: c++ 内存分配
date: 2017-04-10 17:12:15
categories: c++
tags: c++  
excerpt: c++ 内存一共被分为5个区：栈区、堆区、BSS、数据区、代码区
---

一共被分为5个区：

1、 **栈区** （stack） 从高地址向低地址增长。由编译器自动管理分配。在执行函数时，函数内局部变量的存储单元都可以在栈上创建，函数执行结束时这些存储单元自动被释放。栈内存分配运算内置于处理器的指令集中，效率很高，但是分配的内存容量有限。 

2、**堆区** （heap）动态内存分配。程序在运行的时候用 malloc 或 new 申请任意多少的内存，程序员自己负责在何时用 free 或 delete 释放内存。动态内存的生存期由我们决定，使用非常灵活，但问题也最多，存在忘记释放导致内存泄漏。

3、**BSS** 存放**未初始化**的全局和静态变量。（默认设为0）

4、**数据区** （Data Segment） 存放已初始化的全局和静态变量， 常量数据（如字符串常量）。

5、**代码区（Code Segment）** 也称Text Segment，存放可执行程序的机器码。


![](./assets/programming-language/cplusplus-memory-2022-12-13_21-49-22.png)


----
参考：

[深度阅读：深入 C++ 内存管理](https://zhuanlan.zhihu.com/p/344377490)